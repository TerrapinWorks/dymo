<!DOCTYPE html>
<html>
  <head>
    <title> Maunal Printing Page </title>
  </head>
  <style>
    body{
      font-size:120%;
    }
  </style>
  <script>
  function formToServer(){
    var firstName = document.getElementById("firstName").value;
    var lastName = document.getElementById("lastName").value;
    var email = document.getElementById("email").value;
    var cost = document.getElementById("cost").value;

    if(!cost.includes("$")){
      cost = "$" + cost;
    }
    // we can assume that all input is correct.. if they inputted too many characters the server will respond either way
    var url = "http://192.168.1.92:8081/print/" +  firstName + "/"+ lastName +"/" +email + "/" + cost;
    // this will invoke onServerResponse() when server responds
    httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = onServerResponse;
    httpRequest.open("GET", url, true);
    httpRequest.send(null);
  }

  function onServerResponse() {

    if (httpRequest.readyState == XMLHttpRequest.DONE) {
    // at this point the server should have handled the request

    // if server sends back an okay and a sucess that means everything printed
  	if (httpRequest.status == 200 && httpRequest.response=="sucess" ){
  	   // change the text to the fact that request was sent to printer
       console.log("WIN");
       document.getElementById("form").innerHTML="Sending infromation to printer"


  	}
    else if(httpRequest.response){
      document.getElementById("form").innerHTML="Paremeters were too long.. request denied due to save ink (server.js line 51)";
    }
    // else means that most lilkey the server is not online (I cant think of any other problems)
    else{
      document.getElementById("form").innerHTML="Server has crashed :(";
    }
  }
}
  </script>
  <body>
    <h2> Manual Printing Page </h2>

    <span id="form">Opps.. the extention could not find the correct infromation automaticaly
      <br/>Input the correct infromation and then press print </span>
      <br/><br/>

        <table name="input" id="form">
          <tr>
            <td>First name: </td>
            <td><input type="text" name="fName" value="" id="firstName"></td>
          </tr>
          <tr>
            <td>Last name: </td>
            <td> <input type="text" name="lName" value="" id="lastName"></td>
          </tr>
          <tr>
            <td>Email: </td>
            <td><input type="text" name="email" value="" id="email"></td>
          </tr>
          <tr>
            <td>Cost:  </td>
            <td><input type="text" name="cost" value="" id="cost"></td>
          </tr>
          <tr><td><input id="button" type="button" value=" Print Label" onclick="formToServer();" /></td></tr>
        </table>
      <span id="response"></span>



</body>
</html>
